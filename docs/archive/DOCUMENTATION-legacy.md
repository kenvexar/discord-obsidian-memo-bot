# Discord-Obsidian Memo Bot - åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
4. [APIä»•æ§˜æ›¸](#APIä»•æ§˜æ›¸)
5. [è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³](#è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³)
6. [ä½¿ç”¨ä¾‹ã¨ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹](#ä½¿ç”¨ä¾‹ã¨ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹)
7. [é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰](#é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰)
8. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Discord-Obsidian Memo Botã¯ã€Discordã‚’çµ±åˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨ã—ã€AIåˆ†æã«ã‚ˆã‚‹è‡ªå‹•ãƒ¡ãƒ¢å‡¦ç†ã¨ObsidianãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¸ã®ä¿å­˜ã‚’æä¾›ã™ã‚‹åŒ…æ‹¬çš„ãªå€‹äººãƒŠãƒ¬ãƒƒã‚¸ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

#### ğŸ¤– AIé§†å‹•ãƒ¡ãƒ¢å‡¦ç†
- **è‡ªå‹•ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åˆ†æ**: Google Gemini AIã«ã‚ˆã‚‹Discordãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è‡ªå‹•åˆ†æãƒ»åˆ†é¡
- **ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆã‚¿ã‚°ä»˜ã‘**: å†…å®¹ã«åŸºã¥ãè‡ªå‹•ã‚¿ã‚°ç”Ÿæˆã¨ã‚«ãƒ†ã‚´ãƒªåˆ†é¡
- **è¦ç´„ç”Ÿæˆ**: é•·æ–‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è‡ªå‹•è¦ç´„ã¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º
- **URLã‚³ãƒ³ãƒ†ãƒ³ãƒ„è§£æ**: å…±æœ‰ã•ã‚ŒãŸãƒªãƒ³ã‚¯ã®è‡ªå‹•è¦ç´„ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º

#### ğŸ¤ éŸ³å£°å‡¦ç†æ©Ÿèƒ½
- **éŸ³å£°æ–‡å­—èµ·ã“ã—**: Google Cloud Speech-to-Text APIã«ã‚ˆã‚‹é«˜ç²¾åº¦ãªéŸ³å£°èªè­˜
- **éŸ³å£°ãƒ¡ãƒ¢å‡¦ç†**: ãƒœã‚¤ã‚¹ãƒãƒ£ãƒ³ãƒãƒ«ã§ã®éŸ³å£°ãƒ¡ãƒ¢ã®è‡ªå‹•æ–‡å­—èµ·ã“ã—ã¨Obsidianä¿å­˜
- **éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•å‡¦ç†

#### ğŸ“ Obsidiançµ±åˆ
- **æ§‹é€ åŒ–ãƒãƒ¼ãƒˆç”Ÿæˆ**: AIãŒåˆ†æã—ãŸå†…å®¹ã‚’æ§‹é€ åŒ–ã•ã‚ŒãŸMarkdownãƒãƒ¼ãƒˆã¨ã—ã¦ä¿å­˜
- **è‡ªå‹•ãƒ•ã‚©ãƒ«ãƒ€åˆ†é¡**: å†…å®¹ã«åŸºã¥ã„ãŸObsidianãƒœãƒ«ãƒˆå†…ã®é©åˆ‡ãªãƒ•ã‚©ãƒ«ãƒ€ã¸ã®è‡ªå‹•åˆ†é¡
- **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ **: æŸ”è»ŸãªMarkdownãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹ãƒãƒ¼ãƒˆç”Ÿæˆ
- **ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆçµ±åˆ**: æ—¥æ¬¡ãƒãƒ¼ãƒˆã¨ã®çµ±åˆã€Activity Logã¨Daily Tasksã®è‡ªå‹•æ›´æ–°

#### ğŸ’° ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ç®¡ç†
- **æ”¯å‡ºãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°**: é‡‘èé–¢é€£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è‡ªå‹•æ¤œå‡ºã¨æ”¯å‡ºè¨˜éŒ²
- **å®šæœŸè³¼å…¥ç®¡ç†**: ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®ç®¡ç†ã¨æœŸé™æé†’
- **äºˆç®—ç®¡ç†**: æœˆæ¬¡ãƒ»å¹´æ¬¡äºˆç®—ã®è¨­å®šã¨æ”¯å‡ºç›£è¦–
- **ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ**: å®šæœŸçš„ãªæ”¯å‡ºãƒ¬ãƒãƒ¼ãƒˆã®è‡ªå‹•ç”Ÿæˆ

#### âœ… ã‚¿ã‚¹ã‚¯ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
- **ã‚¿ã‚¹ã‚¯æŠ½å‡º**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰ã®ã‚¿ã‚¹ã‚¯è‡ªå‹•æŠ½å‡ºã¨ä½œæˆ
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¿½è·¡**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€²æ—ç®¡ç†ã¨æœŸé™ç›£è¦–
- **ç”Ÿç”£æ€§ãƒ¬ãƒ“ãƒ¥ãƒ¼**: é€±æ¬¡ãƒ»æœˆæ¬¡ç”Ÿç”£æ€§ãƒ¬ãƒãƒ¼ãƒˆã®è‡ªå‹•ç”Ÿæˆ
- **ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ **: é‡è¦ã‚¿ã‚¹ã‚¯ã®è‡ªå‹•é€šçŸ¥

#### ğŸƒâ€â™‚ï¸ å¥åº·ãƒ‡ãƒ¼ã‚¿çµ±åˆ
- **Garmin Connectçµ±åˆ**: Garminå¥åº·ãƒ‡ãƒã‚¤ã‚¹ã¨ã®è‡ªå‹•ãƒ‡ãƒ¼ã‚¿åŒæœŸ
- **æ´»å‹•åˆ†æ**: é‹å‹•ãƒ‡ãƒ¼ã‚¿ã®åˆ†æã¨ã‚¤ãƒ³ã‚µã‚¤ãƒˆç”Ÿæˆ
- **ç¡çœ åˆ†æ**: ç¡çœ ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¿½è·¡ã¨æ”¹å–„ææ¡ˆ
- **å¥åº·ãƒ¬ãƒãƒ¼ãƒˆ**: å®šæœŸçš„ãªå¥åº·ãƒ‡ãƒ¼ã‚¿ã‚µãƒãƒªãƒ¼ã®ç”Ÿæˆ

### ã‚·ã‚¹ãƒ†ãƒ ç‰¹å¾´

- **éåŒæœŸå‡¦ç†**: é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãªéåŒæœŸI/Oæ“ä½œ
- **å‹å®‰å…¨æ€§**: å®Œå…¨ãªPythonå‹ãƒ’ãƒ³ãƒˆã«ã‚ˆã‚‹å®‰å…¨æ€§ç¢ºä¿
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: Google Cloud Secret Managerã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ­ã‚°ã«ã‚ˆã‚‹å®‰å…¨ãªç§˜å¯†æƒ…å ±ç®¡ç†
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: Google Cloud Runã§ã®24æ™‚é–“365æ—¥ç¨¼åƒå¯¾å¿œ
- **åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ**: å˜ä½“ãƒ†ã‚¹ãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹å“è³ªä¿è¨¼

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ

Discord-Obsidian Memo Botã¯ä»¥ä¸‹ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Interface Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Discord Bot   â”‚  â”‚      REST API (Future)          â”‚  â”‚
â”‚  â”‚   (Primary UI)  â”‚  â”‚   (Web Dashboard)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Business Logic Layer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Message      â”‚ â”‚ AI Processing â”‚ â”‚ Finance Manager  â”‚   â”‚
â”‚  â”‚ Processing   â”‚ â”‚ & Analysis    â”‚ â”‚ & Task Manager   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Integration Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Gemini AI   â”‚ â”‚ Google Cloud â”‚ â”‚ Garmin Connect       â”‚  â”‚
â”‚  â”‚ API         â”‚ â”‚ Speech API   â”‚ â”‚ API                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Storage Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     Obsidian Vault      â”‚  â”‚   Security & Logs       â”‚   â”‚
â”‚  â”‚   (Structured Notes)    â”‚  â”‚ (Cloud Secret Manager)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

```
src/
â”œâ”€â”€ bot/                    # Discord Bot ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”œâ”€â”€ client.py          # ãƒ¡ã‚¤ãƒ³Discordã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ handlers.py        # ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â”œâ”€â”€ commands.py        # ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰
â”‚   â”œâ”€â”€ message_processor.py # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â””â”€â”€ models.py          # Discordãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚
â”œâ”€â”€ ai/                     # AIå‡¦ç†ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”œâ”€â”€ processor.py       # ãƒ¡ã‚¤ãƒ³AIãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼
â”‚   â”œâ”€â”€ gemini_client.py   # Gemini APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ note_analyzer.py   # ãƒãƒ¼ãƒˆåˆ†æã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ url_processor.py   # URLå†…å®¹å‡¦ç†
â”‚   â””â”€â”€ vector_store.py    # ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢
â”‚
â”œâ”€â”€ obsidian/              # Obsidiançµ±åˆãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”œâ”€â”€ file_manager.py    # ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œç®¡ç†
â”‚   â”œâ”€â”€ template_system.py # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ daily_integration.py # ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆçµ±åˆ
â”‚   â””â”€â”€ organizer.py       # ãƒœãƒ«ãƒˆçµ„ç¹”åŒ–
â”‚
â”œâ”€â”€ finance/               # ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ç®¡ç†
â”‚   â”œâ”€â”€ expense_manager.py # æ”¯å‡ºç®¡ç†
â”‚   â”œâ”€â”€ subscription_manager.py # ã‚µãƒ–ã‚¹ã‚¯ç®¡ç†
â”‚   â””â”€â”€ report_generator.py # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”‚
â”œâ”€â”€ tasks/                 # ã‚¿ã‚¹ã‚¯ç®¡ç†
â”‚   â”œâ”€â”€ task_manager.py    # ã‚¿ã‚¹ã‚¯ç®¡ç†
â”‚   â”œâ”€â”€ schedule_manager.py # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†
â”‚   â””â”€â”€ reminder_system.py # ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼
â”‚
â”œâ”€â”€ health_analysis/       # å¥åº·ãƒ‡ãƒ¼ã‚¿åˆ†æ
â”‚   â”œâ”€â”€ analyzer.py        # ãƒ‡ãƒ¼ã‚¿åˆ†æ
â”‚   â”œâ”€â”€ integrator.py      # ãƒ‡ãƒ¼ã‚¿çµ±åˆ
â”‚   â””â”€â”€ scheduler.py       # å®šæœŸå‡¦ç†
â”‚
â”œâ”€â”€ garmin/                # Garmin Connectçµ±åˆ
â”‚   â”œâ”€â”€ client.py          # Garmin APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ cache.py           # ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”‚   â””â”€â”€ formatter.py       # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚
â”œâ”€â”€ audio/                 # éŸ³å£°å‡¦ç†
â”‚   â””â”€â”€ speech_processor.py # éŸ³å£°æ–‡å­—èµ·ã“ã—
â”‚
â”œâ”€â”€ security/              # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ secret_manager.py  # ç§˜å¯†æƒ…å ±ç®¡ç†
â”‚   â””â”€â”€ access_logger.py   # ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°
â”‚
â””â”€â”€ monitoring/            # ç›£è¦–ãƒ»ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
    â””â”€â”€ health_server.py   # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

1. **å…¥åŠ›å‡¦ç†**: Discordãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ â†’ Message Handler â†’ AI Processor
2. **AIåˆ†æ**: Gemini API â†’ Content Analysis â†’ Category Detection
3. **æ§‹é€ åŒ–**: Template System â†’ Markdown Generation â†’ Metadata Extraction
4. **ä¿å­˜**: Obsidian File Manager â†’ Vault Organization â†’ File Operations
5. **çµ±åˆ**: Daily Note Integration â†’ Cross-referencing â†’ Search Indexing

### è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

- **ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: æ˜ç¢ºãªè²¬ä»»åˆ†é›¢ã¨ä¿å®ˆæ€§
- **ä¾å­˜æ€§æ³¨å…¥**: ç–çµåˆã¨ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§
- **ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³**: è¨­å®šãƒ™ãƒ¼ã‚¹ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆ
- **ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³**: ãƒ—ãƒ©ã‚¬ãƒ–ãƒ«ãªå‡¦ç†æ–¹æ³•
- **ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### å‰ææ¡ä»¶

- **Python**: 3.13ä»¥ä¸Š
- **uv**: é«˜é€ŸPythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
- **Obsidian**: ãƒ­ãƒ¼ã‚«ãƒ«ãƒœãƒ«ãƒˆã¾ãŸã¯ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸãƒœãƒ«ãƒˆ
- **Discordãƒœãƒƒãƒˆ**: Discord Developer Portalã§ã®è¨­å®šæ¸ˆã¿ãƒœãƒƒãƒˆ

### å¿…è¦ãªAPIã‚­ãƒ¼

1. **Discord Bot Token**: [Discord Developer Portal](https://discord.com/developers/applications)
2. **Google Gemini API Key**: [Google AI Studio](https://makersuite.google.com/)
3. **Google Cloud Project** (éŸ³å£°èªè­˜ç”¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
4. **Garmin Connect Account** (å¥åº·ãƒ‡ãƒ¼ã‚¿çµ±åˆç”¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

#### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/kenvexar/discord-obsidian-memo-bot.git
cd discord-obsidian-memo-bot
```

#### 2. Pythonç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# uvã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆ)
curl -LsSf https://astral.sh/uv/install.sh | sh

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync

# é–‹ç™ºä¾å­˜é–¢ä¿‚ã‚‚å«ã‚ã‚‹å ´åˆ
uv sync --dev
```

#### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# .env.exampleã‚’ã‚³ãƒ”ãƒ¼
cp .env.example .env

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
nano .env
```

#### 4. å¿…é ˆç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```env
# Core Discord & AI
DISCORD_BOT_TOKEN=your_discord_bot_token
DISCORD_GUILD_ID=your_guild_id
GEMINI_API_KEY=your_gemini_api_key
OBSIDIAN_VAULT_PATH=/path/to/your/obsidian/vault

# Channel Configuration (Discordã‚µãƒ¼ãƒãƒ¼ã«å¿œã˜ã¦è¨­å®š)
CHANNEL_INBOX=123456789              # ãƒ¡ã‚¤ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ¢
CHANNEL_VOICE=123456789              # ãƒœã‚¤ã‚¹ãƒ¡ãƒ¢
CHANNEL_FILES=123456789              # ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰
CHANNEL_MONEY=123456789              # é‡‘èé–¢é€£
CHANNEL_FINANCE_REPORTS=123456789    # è²¡å‹™ãƒ¬ãƒãƒ¼ãƒˆ
CHANNEL_TASKS=123456789              # ã‚¿ã‚¹ã‚¯ç®¡ç†
CHANNEL_PRODUCTIVITY_REVIEWS=123456789 # ç”Ÿç”£æ€§ãƒ¬ãƒ“ãƒ¥ãƒ¼
CHANNEL_NOTIFICATIONS=123456789      # é€šçŸ¥
CHANNEL_COMMANDS=123456789           # ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
```

#### 5. ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®è¨­å®š

```env
# éŸ³å£°èªè­˜ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json

# Garmin Connectçµ±åˆ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
GARMIN_EMAIL=your_garmin_email
GARMIN_PASSWORD=your_garmin_password

# è¿½åŠ ãƒãƒ£ãƒ³ãƒãƒ« (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
CHANNEL_HEALTH_ACTIVITIES=123456789
CHANNEL_HEALTH_SLEEP=123456789
CHANNEL_PROJECTS=123456789
CHANNEL_WEEKLY_REVIEWS=123456789
```

#### 6. Obsidianãƒœãƒ«ãƒˆã®åˆæœŸåŒ–

```bash
# ãƒœãƒ«ãƒˆæ§‹é€ ã®è‡ªå‹•ä½œæˆ
uv run python -c "
from src.obsidian.file_manager import ObsidianFileManager
from src.config import get_settings
manager = ObsidianFileManager(get_settings().obsidian_vault_path)
import asyncio
asyncio.run(manager.initialize_vault())
"
```

#### 7. å‹•ä½œç¢ºèª

```bash
# è¨­å®šãƒ†ã‚¹ãƒˆ
uv run python -c "from src.config import get_settings; print('è¨­å®šOK:', get_settings().environment)"

# ãƒœãƒƒãƒˆèµ·å‹•ãƒ†ã‚¹ãƒˆ
uv run python -m src.main
```

### Dockerç’°å¢ƒã§ã®å®Ÿè¡Œ

#### 1. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰

```bash
docker build -t discord-obsidian-memo-bot .
```

#### 2. Docker Composeã§ã®å®Ÿè¡Œ

```yaml
# docker-compose.yml
version: '3.8'
services:
  bot:
    build: .
    env_file:
      - .env
    volumes:
      - ./obsidian_vault:/app/obsidian_vault:rw
      - ./logs:/app/logs:rw
    restart: unless-stopped
```

```bash
docker-compose up -d
```

### Google Cloud Runã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤

#### 1. Cloud Runè¨­å®š

```bash
# Google Cloud CLIã®è¨­å®š
gcloud auth login
gcloud config set project YOUR_PROJECT_ID

# ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®è¨­å®š
gcloud secrets create discord-bot-token --data-file=<(echo -n "YOUR_TOKEN")
gcloud secrets create gemini-api-key --data-file=<(echo -n "YOUR_KEY")

# ãƒ‡ãƒ—ãƒ­ã‚¤
gcloud run deploy discord-obsidian-memo-bot \
  --source . \
  --platform managed \
  --region asia-northeast1 \
  --allow-unauthenticated \
  --set-env-vars ENVIRONMENT=production
```

---

## APIä»•æ§˜æ›¸

### Discord ã‚³ãƒãƒ³ãƒ‰ API

Discord-Obsidian Memo Botã¯è±Šå¯Œãªã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

#### åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

##### `/ping`
- **èª¬æ˜**: ãƒœãƒƒãƒˆã®å¿œç­”æ€§ãƒ†ã‚¹ãƒˆ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã¨ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹
- **ä¾‹**: `/ping`

##### `/status`
- **èª¬æ˜**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®çŠ¶æ…‹ç¢ºèª
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**:
  - Botç¨¼åƒæ™‚é–“
  - APIä½¿ç”¨çŠ¶æ³
  - ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  - å„ã‚µãƒ¼ãƒ“ã‚¹æ¥ç¶šçŠ¶æ…‹

##### `/help`
- **èª¬æ˜**: åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰ã®ä¸€è¦§è¡¨ç¤º
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `category` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ã‚³ãƒãƒ³ãƒ‰ã‚«ãƒ†ã‚´ãƒª
- **æˆ»ã‚Šå€¤**: ã‚³ãƒãƒ³ãƒ‰ãƒªã‚¹ãƒˆã¨ä½¿ç”¨æ–¹æ³•

#### AIå‡¦ç†ã‚³ãƒãƒ³ãƒ‰

##### `/process`
- **èª¬æ˜**: ãƒ†ã‚­ã‚¹ãƒˆã®æ‰‹å‹•AIå‡¦ç†
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `text` (å¿…é ˆ): å‡¦ç†ã—ãŸã„ãƒ†ã‚­ã‚¹ãƒˆ
  - `save_to_obsidian` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): Obsidianã«ä¿å­˜ã™ã‚‹ã‹
- **æˆ»ã‚Šå€¤**: AIåˆ†æçµæœã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

##### `/summarize`
- **èª¬æ˜**: é•·æ–‡ãƒ†ã‚­ã‚¹ãƒˆã®è¦ç´„ç”Ÿæˆ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `text` (å¿…é ˆ): è¦ç´„ã—ãŸã„ãƒ†ã‚­ã‚¹ãƒˆ
  - `max_length` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): æœ€å¤§è¦ç´„é•·
- **æˆ»ã‚Šå€¤**: è¦ç´„æ–‡ã¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ

##### `/analyze_url`
- **èª¬æ˜**: URLå†…å®¹ã®åˆ†æã¨è¦ç´„
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `url` (å¿…é ˆ): åˆ†æã—ãŸã„URL
  - `save_summary` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): è¦ç´„ã‚’Obsidianã«ä¿å­˜
- **æˆ»ã‚Šå€¤**: URLã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¦ç´„ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

#### Obsidianã‚³ãƒãƒ³ãƒ‰

##### `/search_notes`
- **èª¬æ˜**: Obsidianãƒœãƒ«ãƒˆå†…ã®ãƒãƒ¼ãƒˆæ¤œç´¢
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `query` (å¿…é ˆ): æ¤œç´¢ã‚¯ã‚¨ãƒª
  - `folder` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): æ¤œç´¢å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€
  - `limit` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): çµæœä¸Šé™æ•°
- **æˆ»ã‚Šå€¤**: ãƒãƒƒãƒã—ãŸãƒãƒ¼ãƒˆã®ãƒªã‚¹ãƒˆã¨å†…å®¹ã‚¹ãƒ‹ãƒšãƒƒãƒˆ

##### `/create_note`
- **èª¬æ˜**: æ–°ã—ã„Obsidianãƒãƒ¼ãƒˆã®ä½œæˆ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `title` (å¿…é ˆ): ãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒˆãƒ«
  - `content` (å¿…é ˆ): ãƒãƒ¼ãƒˆå†…å®¹
  - `folder` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ä¿å­˜å…ˆãƒ•ã‚©ãƒ«ãƒ€
  - `template` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ä½¿ç”¨ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- **æˆ»ã‚Šå€¤**: ä½œæˆã•ã‚ŒãŸãƒãƒ¼ãƒˆã®æƒ…å ±

##### `/vault_stats`
- **èª¬æ˜**: Obsidianãƒœãƒ«ãƒˆã®çµ±è¨ˆæƒ…å ±
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**:
  - ç·ãƒãƒ¼ãƒˆæ•°
  - ãƒ•ã‚©ãƒ«ãƒ€åˆ¥ãƒãƒ¼ãƒˆæ•°
  - æœ€è¿‘ã®æ›´æ–°çŠ¶æ³
  - ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡

#### ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã‚³ãƒãƒ³ãƒ‰

##### `/daily_note`
- **èª¬æ˜**: ä»Šæ—¥ã®ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆæ“ä½œ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `action` (å¿…é ˆ): `show`, `create`, `update`
  - `content` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): è¿½åŠ ã™ã‚‹å†…å®¹
- **æˆ»ã‚Šå€¤**: ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã®å†…å®¹ã¾ãŸã¯æ›´æ–°çµæœ

##### `/weekly_review`
- **èª¬æ˜**: é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç”Ÿæˆ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `week_offset` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ä½•é€±é–“å‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0)
- **æˆ»ã‚Šå€¤**: 1é€±é–“ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚µãƒãƒªãƒ¼

#### ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ç®¡ç†ã‚³ãƒãƒ³ãƒ‰

##### `/add_expense`
- **èª¬æ˜**: æ”¯å‡ºã®è¨˜éŒ²
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `amount` (å¿…é ˆ): é‡‘é¡
  - `description` (å¿…é ˆ): æ”¯å‡ºèª¬æ˜
  - `category` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ã‚«ãƒ†ã‚´ãƒª
  - `date` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): æ—¥ä»˜ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ä»Šæ—¥)
- **æˆ»ã‚Šå€¤**: è¨˜éŒ²ã•ã‚ŒãŸæ”¯å‡ºã®è©³ç´°

##### `/expense_report`
- **èª¬æ˜**: æ”¯å‡ºãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `period` (å¿…é ˆ): `daily`, `weekly`, `monthly`, `yearly`
  - `category` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ç‰¹å®šã‚«ãƒ†ã‚´ãƒªã®ã¿
- **æˆ»ã‚Šå€¤**: æœŸé–“åˆ¥æ”¯å‡ºã‚µãƒãƒªãƒ¼

##### `/add_subscription`
- **èª¬æ˜**: å®šæœŸè³¼å…¥ã‚µãƒ¼ãƒ“ã‚¹ã®ç™»éŒ²
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `name` (å¿…é ˆ): ã‚µãƒ¼ãƒ“ã‚¹å
  - `amount` (å¿…é ˆ): æœˆé¡æ–™é‡‘
  - `billing_date` (å¿…é ˆ): è«‹æ±‚æ—¥
  - `category` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ã‚«ãƒ†ã‚´ãƒª
- **æˆ»ã‚Šå€¤**: ç™»éŒ²ã•ã‚ŒãŸã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³è©³ç´°

##### `/subscription_overview`
- **èª¬æ˜**: å®šæœŸè³¼å…¥ã®æ¦‚è¦è¡¨ç¤º
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**:
  - æœˆé¡åˆè¨ˆ
  - æ¬¡å›è«‹æ±‚äºˆå®š
  - æœŸé™ãŒè¿‘ã„ã‚µãƒ¼ãƒ“ã‚¹

#### ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚³ãƒãƒ³ãƒ‰

##### `/add_task`
- **èª¬æ˜**: æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã®ä½œæˆ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `title` (å¿…é ˆ): ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒˆãƒ«
  - `description` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ã‚¿ã‚¹ã‚¯è©³ç´°
  - `due_date` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): æœŸé™
  - `priority` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): å„ªå…ˆåº¦ (`low`, `medium`, `high`, `urgent`)
  - `project` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå
- **æˆ»ã‚Šå€¤**: ä½œæˆã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã®è©³ç´°

##### `/list_tasks`
- **èª¬æ˜**: ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã®è¡¨ç¤º
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `status` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): `pending`, `in_progress`, `completed`
  - `project` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ç‰¹å®šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿
  - `priority` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ç‰¹å®šå„ªå…ˆåº¦ã®ã¿
- **æˆ»ã‚Šå€¤**: ãƒ•ã‚£ãƒ«ã‚¿ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

##### `/complete_task`
- **èª¬æ˜**: ã‚¿ã‚¹ã‚¯ã®å®Œäº†
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `task_id` (å¿…é ˆ): ã‚¿ã‚¹ã‚¯ID
  - `notes` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): å®Œäº†ãƒ¡ãƒ¢
- **æˆ»ã‚Šå€¤**: å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ã®è©³ç´°

##### `/productivity_report`
- **èª¬æ˜**: ç”Ÿç”£æ€§ãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `period` (å¿…é ˆ): `daily`, `weekly`, `monthly`
- **æˆ»ã‚Šå€¤**:
  - å®Œäº†ã‚¿ã‚¹ã‚¯æ•°
  - å¹³å‡å®Œäº†æ™‚é–“
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¥é€²æ—

#### ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ã‚³ãƒãƒ³ãƒ‰

##### `/backup_vault`
- **èª¬æ˜**: Obsidianãƒœãƒ«ãƒˆã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ã¨è©³ç´°

##### `/system_metrics`
- **èª¬æ˜**: è©³ç´°ãªã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**:
  - CPU/ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡
  - APIä½¿ç”¨çµ±è¨ˆ
  - ã‚¨ãƒ©ãƒ¼çµ±è¨ˆ
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹

##### `/cache_info`
- **èª¬æ˜**: AIã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®çŠ¶æ…‹ç¢ºèª
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ã¨ä½¿ç”¨çŠ¶æ³

##### `/clear_cache`
- **èª¬æ˜**: AIã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**: ã‚¯ãƒªã‚¢ã•ã‚ŒãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥æ•°

#### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ã‚³ãƒãƒ³ãƒ‰

##### `/list_templates`
- **èª¬æ˜**: åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**: ãªã—
- **æˆ»ã‚Šå€¤**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåã¨ãã®èª¬æ˜

##### `/create_from_template`
- **èª¬æ˜**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ãƒãƒ¼ãƒˆä½œæˆ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
  - `template_name` (å¿…é ˆ): ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå
  - `title` (å¿…é ˆ): ãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒˆãƒ«
  - `variables` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°
- **æˆ»ã‚Šå€¤**: ä½œæˆã•ã‚ŒãŸãƒãƒ¼ãƒˆã®è©³ç´°

### Python API

#### AIProcessor ã‚¯ãƒ©ã‚¹

```python
from src.ai.processor import AIProcessor

class AIProcessor:
    async def process_text(
        self,
        text: str,
        context: Optional[str] = None,
        enable_cache: bool = True
    ) -> ProcessingResult:
        """ãƒ†ã‚­ã‚¹ãƒˆã®AIå‡¦ç†"""

    async def process_batch(
        self,
        texts: List[str],
        max_concurrent: int = 3
    ) -> List[ProcessingResult]:
        """ãƒãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†"""

    async def generate_embeddings(
        self,
        text: str
    ) -> List[float]:
        """ãƒ†ã‚­ã‚¹ãƒˆã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆ"""

    async def summarize_url_content(
        self,
        url: str
    ) -> UrlSummary:
        """URLå†…å®¹ã®è¦ç´„ç”Ÿæˆ"""
```

#### ObsidianFileManager ã‚¯ãƒ©ã‚¹

```python
from src.obsidian.file_manager import ObsidianFileManager

class ObsidianFileManager:
    async def save_note(
        self,
        content: str,
        metadata: NoteMetadata,
        folder_hint: Optional[str] = None
    ) -> SaveResult:
        """ãƒãƒ¼ãƒˆã®ä¿å­˜"""

    async def search_notes(
        self,
        query: str,
        folder: Optional[str] = None,
        limit: int = 10
    ) -> List[SearchResult]:
        """ãƒãƒ¼ãƒˆæ¤œç´¢"""

    async def get_vault_stats(self) -> VaultStats:
        """ãƒœãƒ«ãƒˆçµ±è¨ˆã®å–å¾—"""

    async def backup_vault(self) -> BackupResult:
        """ãƒœãƒ«ãƒˆã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"""
```

---

## è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

### ç’°å¢ƒå¤‰æ•°è¨­å®š

#### ã‚³ã‚¢è¨­å®š (å¿…é ˆ)

| å¤‰æ•°å | èª¬æ˜ | ä¾‹ |
|--------|------|-----|
| `DISCORD_BOT_TOKEN` | Discordãƒœãƒƒãƒˆãƒˆãƒ¼ã‚¯N | `MTIzNDU2Nzg5MDEyMzQ1Njc4OTA...` |
| `DISCORD_GUILD_ID` | Discordã‚µãƒ¼ãƒãƒ¼ID | `123456789012345678` |
| `GEMINI_API_KEY` | Google Gemini APIã‚­ãƒ¼ | `AIzaSyDaGmWKa4JsXMeMbZdTkxKc...` |
| `OBSIDIAN_VAULT_PATH` | Obsidianãƒœãƒ«ãƒˆãƒ‘ã‚¹ | `/Users/username/ObsidianVault` |

#### ãƒãƒ£ãƒ³ãƒãƒ«è¨­å®š (å¿…é ˆ)

| å¤‰æ•°å | èª¬æ˜ | ç”¨é€” |
|--------|------|------|
| `CHANNEL_INBOX` | ãƒ¡ã‚¤ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ¢ | ä¸€èˆ¬çš„ãªãƒ¡ãƒ¢ã¨ã‚¢ã‚¤ãƒ‡ã‚¢ |
| `CHANNEL_VOICE` | ãƒœã‚¤ã‚¹ãƒ¡ãƒ¢ | éŸ³å£°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‡¦ç† |
| `CHANNEL_FILES` | ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰ | æ–‡æ›¸ãƒ»ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç† |
| `CHANNEL_MONEY` | é‡‘èé–¢é€£ | æ”¯å‡ºãƒ»åå…¥ã®è¨˜éŒ² |
| `CHANNEL_FINANCE_REPORTS` | è²¡å‹™ãƒ¬ãƒãƒ¼ãƒˆ | è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸè²¡å‹™å ±å‘Š |
| `CHANNEL_TASKS` | ã‚¿ã‚¹ã‚¯ç®¡ç† | ã‚¿ã‚¹ã‚¯ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç† |
| `CHANNEL_PRODUCTIVITY_REVIEWS` | ç”Ÿç”£æ€§ãƒ¬ãƒ“ãƒ¥ãƒ¼ | é€±æ¬¡ãƒ»æœˆæ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®é…ä¿¡ |
| `CHANNEL_NOTIFICATIONS` | é€šçŸ¥ | ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ |
| `CHANNEL_COMMANDS` | ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ | ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œ |

#### æ‹¡å¼µãƒãƒ£ãƒ³ãƒãƒ«è¨­å®š (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

| å¤‰æ•°å | èª¬æ˜ | ç”¨é€” |
|--------|------|------|
| `CHANNEL_QUICK_NOTES` | ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒ¢ | çŸ­ã„ãƒ¡ãƒ¢ã®è¿…é€Ÿãªè¨˜éŒ² |
| `CHANNEL_INCOME` | åå…¥è¨˜éŒ² | åå…¥ã®è¿½è·¡ã¨ç®¡ç† |
| `CHANNEL_SUBSCRIPTIONS` | ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ | å®šæœŸè³¼å…¥ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç† |
| `CHANNEL_PROJECTS` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç®¡ç† |
| `CHANNEL_WEEKLY_REVIEWS` | é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ | é€±æ¬¡ç”Ÿç”£æ€§ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| `CHANNEL_GOAL_TRACKING` | ç›®æ¨™è¿½è·¡ | é•·æœŸç›®æ¨™ã®é€²æ—ç®¡ç† |

#### å¥åº·ãƒ‡ãƒ¼ã‚¿è¨­å®š (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

| å¤‰æ•°å | èª¬æ˜ | ç”¨é€” |
|--------|------|------|
| `CHANNEL_HEALTH_ACTIVITIES` | å¥åº·æ´»å‹• | é‹å‹•ãƒ»æ´»å‹•ãƒ‡ãƒ¼ã‚¿ |
| `CHANNEL_HEALTH_SLEEP` | ç¡çœ ãƒ‡ãƒ¼ã‚¿ | ç¡çœ ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ |
| `CHANNEL_HEALTH_WELLNESS` | ã‚¦ã‚§ãƒ«ãƒã‚¹ | å…¨èˆ¬çš„ãªå¥åº·æŒ‡æ¨™ |
| `CHANNEL_HEALTH_ANALYTICS` | å¥åº·åˆ†æ | AIåˆ†æã«ã‚ˆã‚‹å¥åº·ã‚¤ãƒ³ã‚µã‚¤ãƒˆ |

#### APIåˆ¶é™è¨­å®š

| å¤‰æ•°å | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------|-----------|------|
| `GEMINI_API_DAILY_LIMIT` | `1500` | Gemini API 1æ—¥ã‚ãŸã‚Šåˆ¶é™ |
| `GEMINI_API_MINUTE_LIMIT` | `15` | Gemini API 1åˆ†ã‚ãŸã‚Šåˆ¶é™ |
| `SPEECH_API_MONTHLY_LIMIT_MINUTES` | `60` | éŸ³å£°èªè­˜APIæœˆé–“åˆ¶é™ï¼ˆåˆ†ï¼‰ |

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

| å¤‰æ•°å | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------|-----------|------|
| `USE_SECRET_MANAGER` | `false` | Google Cloud Secret Managerä½¿ç”¨ |
| `GOOGLE_CLOUD_PROJECT` | `None` | Google Cloudãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå |
| `ENABLE_ACCESS_LOGGING` | `true` | ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°è¨˜éŒ²ã®æœ‰åŠ¹åŒ– |
| `SECURITY_LOG_PATH` | `None` | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |

#### é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆè¨­å®š

| å¤‰æ•°å | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|--------|-----------|------|
| `ENVIRONMENT` | `development` | å®Ÿè¡Œç’°å¢ƒ (`development`, `production`, `testing`) |
| `ENABLE_MOCK_MODE` | `false` | ãƒ¢ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã®æœ‰åŠ¹åŒ– |
| `MOCK_DISCORD_ENABLED` | `false` | Discord API ãƒ¢ãƒƒã‚¯ |
| `MOCK_GEMINI_ENABLED` | `false` | Gemini API ãƒ¢ãƒƒã‚¯ |
| `MOCK_GARMIN_ENABLED` | `false` | Garmin API ãƒ¢ãƒƒã‚¯ |

### Obsidianãƒœãƒ«ãƒˆæ§‹é€ 

è‡ªå‹•ä½œæˆã•ã‚Œã‚‹ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ï¼š

```
ObsidianVault/
â”œâ”€â”€ 00_Inbox/                  # å—ä¿¡ãƒˆãƒ¬ã‚¤ï¼ˆæœªåˆ†é¡ãƒ¡ãƒ¢ï¼‰
â”œâ”€â”€ 01_Projects/               # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
â”œâ”€â”€ 02_DailyNotes/            # ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ 2024/
â”‚   â”‚   â”œâ”€â”€ 01-January/
â”‚   â”‚   â”œâ”€â”€ 02-February/
â”‚   â”‚   â””â”€â”€ ...
â”œâ”€â”€ 03_Ideas/                  # ã‚¢ã‚¤ãƒ‡ã‚¢ãƒ»ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ 04_Archive/                # ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
â”œâ”€â”€ 05_Resources/              # ãƒªã‚½ãƒ¼ã‚¹ãƒ»å‚è€ƒè³‡æ–™
â”œâ”€â”€ 06_Finance/                # è²¡å‹™ãƒ»å®¶è¨ˆ
â”œâ”€â”€ 07_Tasks/                  # ã‚¿ã‚¹ã‚¯ãƒ»TODO
â”œâ”€â”€ 08_Health/                 # å¥åº·ãƒ»ã‚¦ã‚§ãƒ«ãƒã‚¹
â”œâ”€â”€ 10_Attachments/            # æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ Images/
â”‚   â”œâ”€â”€ Documents/
â”‚   â”œâ”€â”€ Audio/
â”‚   â””â”€â”€ Other/
â””â”€â”€ 99_Meta/                   # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»è¨­å®š
    â””â”€â”€ Templates/             # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        â”œâ”€â”€ daily_note.md
        â”œâ”€â”€ meeting_note.md
        â”œâ”€â”€ task_note.md
        â””â”€â”€ idea_note.md
```

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®š

#### ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
# {{date}} - Daily Note

## Today's Focus
-

## Activities
<!-- Auto-populated by Discord messages -->

## Tasks
<!-- Extracted from messages and manual entries -->

## Finance
<!-- Tracked expenses and income -->

## Health & Wellness
<!-- Garmin data and wellness notes -->

## Reflections
-

## Tomorrow's Plan
-

---
Created: {{timestamp}}
Tags: #daily-note
```

#### ã‚¿ã‚¹ã‚¯ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
# {{title}}

## Description
{{description}}

## Details
- **Priority**: {{priority}}
- **Project**: {{project}}
- **Due Date**: {{due_date}}
- **Status**: {{status}}

## Progress
{{progress_notes}}

## Related Notes
{{related_links}}

---
Created: {{created_date}}
Tags: #task {{project_tag}}
```

---

## ä½¿ç”¨ä¾‹ã¨ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### æ—¥å¸¸çš„ãªä½¿ç”¨ã‚·ãƒŠãƒªã‚ª

#### 1. æœã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```discord
# ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã®ç¢ºèª
/daily_note action:show

# ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ç¢ºèª
/list_tasks status:pending

# å¥åº·ãƒ‡ãƒ¼ã‚¿ã®åŒæœŸï¼ˆGarminé€£æºï¼‰
# è‡ªå‹•å®Ÿè¡Œï¼šæœ8æ™‚ã«å‰æ—¥ã®æ´»å‹•ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
```

#### 2. ã‚¢ã‚¤ãƒ‡ã‚¢ã‚­ãƒ£ãƒ—ãƒãƒ£

```discord
# Inboxãƒãƒ£ãƒ³ãƒãƒ«ã§ã®æŠ•ç¨¿
æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¢ã‚¤ãƒ‡ã‚¢ï¼šAIã‚’ä½¿ã£ãŸå®¶è¨ˆç°¿ã‚¢ãƒ—ãƒªã€‚
éŸ³å£°ã§æ”¯å‡ºã‚’è¨˜éŒ²ã—ã¦ã€è‡ªå‹•ã‚«ãƒ†ã‚´ãƒªåˆ†é¡ã€‚
Obsidianã¨é€£æºã—ã¦æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã€‚

# è‡ªå‹•å‡¦ç†çµæœ
# â†’ 03_Ideas/ai-household-app.md ã¨ã—ã¦ä¿å­˜
# â†’ ã‚¿ã‚°: #idea #ai #finance #app
# â†’ é–¢é€£ãƒãƒ¼ãƒˆã¨ã®ãƒªãƒ³ã‚¯è‡ªå‹•ç”Ÿæˆ
```

#### 3. ä¼šè­°ãƒ¡ãƒ¢

```discord
# Voiceãƒãƒ£ãƒ³ãƒãƒ«ã§ã®éŸ³å£°ãƒ¡ãƒ¢
"ä»Šæ—¥ã®ãƒãƒ¼ãƒ ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã€æ–°æ©Ÿèƒ½ã®ãƒªãƒªãƒ¼ã‚¹äºˆå®šãŒæ¥æœˆã«æ±ºå®šã€‚
UIãƒ‡ã‚¶ã‚¤ãƒ³ã®ä¿®æ­£ã¨ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã®æœ€é©åŒ–ãŒå¿…è¦ã€‚
æ‹…å½“è€…ã¯AliceãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã€BobãŒAPIã‚’æ‹…å½“ã™ã‚‹ã€‚"

# è‡ªå‹•å‡¦ç†çµæœ
# â†’ éŸ³å£°æ–‡å­—èµ·ã“ã— â†’ AIåˆ†æ â†’ æ§‹é€ åŒ–ãƒãƒ¼ãƒˆç”Ÿæˆ
# â†’ 01_Projects/team-meeting-20240117.md
# â†’ ã‚¿ã‚¹ã‚¯è‡ªå‹•æŠ½å‡ºï¼šUIãƒ‡ã‚¶ã‚¤ãƒ³ä¿®æ­£ã€APIæœ€é©åŒ–
```

#### 4. æ”¯å‡ºç®¡ç†

```discord
# Moneyãƒãƒ£ãƒ³ãƒãƒ«ã§ã®æŠ•ç¨¿
ä»Šæ—¥ã®ãƒ©ãƒ³ãƒï¼š1200å††ã€ã‚³ãƒ³ãƒ“ãƒ‹ã§è²·ã„ç‰©ï¼š800å††

# ã¾ãŸã¯ç›´æ¥ã‚³ãƒãƒ³ãƒ‰
/add_expense amount:1200 description:"ãƒ©ãƒ³ãƒ" category:"é£Ÿè²»"
/add_expense amount:800 description:"ã‚³ãƒ³ãƒ“ãƒ‹è²·ã„ç‰©" category:"æ—¥ç”¨å“"

# æœˆæœ«ã®æ”¯å‡ºãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
/expense_report period:monthly
```

#### 5. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†

```discord
# æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
/add_task title:"ãƒ–ãƒ­ã‚°ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«" description:"WordPressã‹ã‚‰Gatsbyã«ç§»è¡Œ" priority:high due_date:"2024-02-15" project:"ãƒ–ãƒ­ã‚°"

# é€²æ—æ›´æ–°
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Œãƒ–ãƒ­ã‚°ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã€ã®é€²æ—ï¼š
ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Œæˆã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç§»è¡Œã‚’é–‹å§‹ã€‚
äºˆå®šã‚ˆã‚Š1æ—¥é…ã‚Œã¦ã„ã‚‹ãŒã€æ¥é€±ã«ã¯å®Œäº†äºˆå®šã€‚

# ã‚¿ã‚¹ã‚¯å®Œäº†
/complete_task task_id:123 notes:"ãƒ‡ã‚¶ã‚¤ãƒ³å®Œäº†ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ¸ˆã¿"
```

### é«˜åº¦ãªä½¿ç”¨ä¾‹

#### 1. è‡ªå‹•åŒ–ã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```python
# ã‚«ã‚¹ã‚¿ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹
# æ¯æœè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹å¥åº·ãƒ‡ãƒ¼ã‚¿åˆ†æ

async def morning_health_routine():
    # Garminãƒ‡ãƒ¼ã‚¿ã®å–å¾—
    garmin_data = await garmin_client.get_yesterday_data()

    # AIåˆ†æ
    health_insights = await ai_processor.analyze_health_data(garmin_data)

    # Obsidianãƒãƒ¼ãƒˆç”Ÿæˆ
    await obsidian_manager.save_health_summary(health_insights)

    # Discordé€šçŸ¥
    await bot.send_notification(
        channel="health_analytics",
        content=f"æ˜¨æ—¥ã®å¥åº·ã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆã—ã¾ã—ãŸï¼š\n{health_insights.summary}"
    )
```

#### 2. è¤‡åˆçš„ãªæƒ…å ±çµ±åˆ

```discord
# URLå…±æœ‰ã«ã‚ˆã‚‹è‡ªå‹•è¨˜äº‹åˆ†æ
https://example.com/interesting-ai-article

# è‡ªå‹•å‡¦ç†ãƒ•ãƒ­ãƒ¼ï¼š
# 1. URLå†…å®¹ã®å–å¾—ãƒ»åˆ†æ
# 2. è¦ç´„ç”Ÿæˆ
# 3. é–¢é€£ã™ã‚‹æ—¢å­˜ãƒãƒ¼ãƒˆã®æ¤œç´¢
# 4. å†…éƒ¨ãƒªãƒ³ã‚¯ã®ç”Ÿæˆ
# 5. é©åˆ‡ãªãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜
# 6. ã‚¿ã‚°ã®è‡ªå‹•ä»˜ä¸

# çµæœä¾‹ï¼š
# â†’ 05_Resources/ai-trends-2024.md
# â†’ é–¢é€£ãƒãƒ¼ãƒˆ: [[Machine Learning Basics]], [[Future of AI]]
# â†’ ã‚¿ã‚°: #ai #trends #article #resource
```

#### 3. é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```discord
# é‡‘æ›œæ—¥ã®é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼
/weekly_review

# è‡ªå‹•ç”Ÿæˆå†…å®¹ï¼š
# - ä»Šé€±å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯
# - ä»Šé€±ã®æ”¯å‡ºã‚µãƒãƒªãƒ¼
# - å¥åº·æ´»å‹•ãƒ‡ãƒ¼ã‚¿
# - AIãŒæ¤œå‡ºã—ãŸé‡è¦ãªãƒ¡ãƒ¢
# - æ¥é€±ã®æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
```

### ç‰¹æ®Šãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

#### 1. ç ”ç©¶ãƒ»å­¦ç¿’ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```discord
# ç ”ç©¶ãƒ†ãƒ¼ãƒã«é–¢ã™ã‚‹æƒ…å ±åé›†
ç ”ç©¶ãƒ†ãƒ¼ãƒï¼šã€Œæ©Ÿæ¢°å­¦ç¿’ã«ãŠã‘ã‚‹èª¬æ˜å¯èƒ½æ€§ã€

# é–¢é€£è¨˜äº‹ã®å…±æœ‰
https://research.example.com/explainable-ai-paper
https://blog.example.com/ml-interpretability

# è‡ªå‹•å‡¦ç†ï¼š
# â†’ è«–æ–‡è¦ç´„ç”Ÿæˆ
# â†’ æ—¢å­˜ã®ç ”ç©¶ãƒãƒ¼ãƒˆã¨ã®é–¢é€£ä»˜ã‘
# â†’ æ¦‚å¿µãƒãƒƒãƒ—ã®æ›´æ–°
# â†’ è¿½åŠ èª¿æŸ»é …ç›®ã®ææ¡ˆ
```

#### 2. å‰µä½œãƒ»ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´

```discord
# ãƒ–ãƒ­ã‚°è¨˜äº‹ã®ã‚¢ã‚¤ãƒ‡ã‚¢æŠ•ç¨¿
ãƒ–ãƒ­ã‚°ãƒã‚¿ï¼šã€Œãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã§ã®ç”Ÿç”£æ€§å‘ä¸Šãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã€
æ›¸ããŸã„å†…å®¹ï¼š
- æ™‚é–“ç®¡ç†ã®ã‚³ãƒ„
- é›†ä¸­åŠ›ç¶­æŒã®æ–¹æ³•
- ãƒ„ãƒ¼ãƒ«æ´»ç”¨æ³•

# AIæ”¯æ´æ©Ÿèƒ½ï¼š
# â†’ è¨˜äº‹æ§‹æˆæ¡ˆã®è‡ªå‹•ç”Ÿæˆ
# â†’ é–¢é€£ã™ã‚‹æ—¢å­˜ãƒ¡ãƒ¢ã®æ¤œç´¢
# â†’ å‚è€ƒè³‡æ–™ã®ææ¡ˆ
# â†’ åŸ·ç­†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æä¾›
```

#### 3. å¥åº·ã¨ã‚¦ã‚§ãƒ«ãƒã‚¹è¿½è·¡

```discord
# å¥åº·ç›®æ¨™ã®è¨­å®š
/add_task title:"1æ—¥1ä¸‡æ­©é”æˆ" priority:medium project:"å¥åº·ç®¡ç†"

# Garminè‡ªå‹•åŒæœŸãƒ‡ãƒ¼ã‚¿ï¼š
# â†’ æ¯æ—¥ã®æ­©æ•°ã€å¿ƒæ‹æ•°ã€ç¡çœ ãƒ‡ãƒ¼ã‚¿
# â†’ é€±æ¬¡ãƒ»æœˆæ¬¡ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
# â†’ ç›®æ¨™é”æˆåº¦ã®è‡ªå‹•è©•ä¾¡
# â†’ æ”¹å–„ææ¡ˆã®ç”Ÿæˆ

# å¥åº·ãƒ¬ãƒãƒ¼ãƒˆä¾‹ï¼š
# â†’ å¹³å‡ç¡çœ æ™‚é–“ï¼š7æ™‚é–“15åˆ†ï¼ˆç›®æ¨™ï¼š8æ™‚é–“ï¼‰
# â†’ é€±é–“é‹å‹•æ™‚é–“ï¼š3.5æ™‚é–“ï¼ˆç›®æ¨™ï¼š5æ™‚é–“ï¼‰
# â†’ ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ï¼šä¸­ç¨‹åº¦
# â†’ æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼šå°±å¯æ™‚é–“ã‚’30åˆ†æ—©ã‚ã‚‹
```

---

## é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰

### é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### 1. å¿…è¦ãªãƒ„ãƒ¼ãƒ«

```bash
# Python 3.13ä»¥ä¸Š
python --version

# uvãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
curl -LsSf https://astral.sh/uv/install.sh | sh

# Git
git --version
```

#### 2. é–‹ç™ºä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/kenvexar/discord-obsidian-memo-bot.git
cd discord-obsidian-memo-bot

# é–‹ç™ºç’°å¢ƒæ§‹ç¯‰
uv sync --dev

# pre-commitãƒ•ãƒƒã‚¯ã®è¨­å®š
uv run pre-commit install
```

#### 3. é–‹ç™ºç”¨è¨­å®š

```bash
# é–‹ç™ºç”¨ç’°å¢ƒå¤‰æ•°
cp .env.example .env.development

# ãƒ†ã‚¹ãƒˆç’°å¢ƒã®è¨­å®š
export ENVIRONMENT=development
export ENABLE_MOCK_MODE=true
```

### ã‚³ãƒ¼ãƒ‰å“è³ªã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

#### 1. ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°

```bash
# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆRuffï¼‰
uv run ruff format src/

# ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°ãƒã‚§ãƒƒã‚¯
uv run ruff check src/

# è‡ªå‹•ä¿®æ­£
uv run ruff check src/ --fix

# å‹ãƒã‚§ãƒƒã‚¯ï¼ˆmypyï¼‰
uv run mypy src/
```

#### 2. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
uv run pytest

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
uv run pytest --cov=src

# ç‰¹å®šãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
uv run pytest tests/unit/test_ai_processing.py

# çµ±åˆãƒ†ã‚¹ãƒˆ
uv run pytest tests/integration/

# éåŒæœŸãƒ†ã‚¹ãƒˆï¼ˆè©³ç´°å‡ºåŠ›ï¼‰
uv run pytest tests/unit/test_ai_processing.py -v
```

#### 3. ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯

```bash
# å…¨å“è³ªãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
uv run ruff check src/ --fix && uv run ruff format src/ && uv run mypy src/

# pre-commitãƒ•ãƒƒã‚¯å®Ÿè¡Œ
uv run pre-commit run --all-files
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

#### 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆåŸå‰‡

- **å˜ä¸€è²¬ä»»ã®åŸå‰‡**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ä¸€ã¤ã®æ˜ç¢ºãªè²¬ä»»ã‚’æŒã¤
- **ä¾å­˜æ€§æ³¨å…¥**: ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã®ä¾å­˜é–¢ä¿‚æ³¨å…¥
- **å‹å®‰å…¨æ€§**: å®Œå…¨ãªå‹ãƒ’ãƒ³ãƒˆ
- **éåŒæœŸãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ¼**: å…¨I/Oæ“ä½œã‚’éåŒæœŸã§å®Ÿè£…

#### 2. ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```python
# å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬ä»»ç¯„å›²

# Interface Layer (bot/)
# - Discord API ã¨ã®ç›´æ¥ã‚„ã‚Šå–ã‚Š
# - ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®æ¤œè¨¼
# - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

# Business Logic Layer (ai/, finance/, tasks/)
# - ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
# - ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®é©ç”¨
# - ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»å‡¦ç†

# Integration Layer (obsidian/, garmin/, audio/)
# - å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®çµ±åˆ
# - ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®å¤‰æ›
# - APIå‘¼ã³å‡ºã—ç®¡ç†

# Infrastructure Layer (config/, security/, utils/)
# - æ¨ªæ–­çš„é–¢å¿ƒäº‹
# - è¨­å®šç®¡ç†
# - ãƒ­ã‚°ãƒ»ç›£è¦–
```

#### 3. æ–°æ©Ÿèƒ½é–‹ç™ºãƒ•ãƒ­ãƒ¼

```python
# 1. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾© (models.py)
from pydantic import BaseModel
from typing import Optional
from datetime import datetime

class NewFeatureRequest(BaseModel):
    title: str
    description: Optional[str] = None
    priority: str = "medium"
    created_at: datetime = Field(default_factory=datetime.now)

# 2. ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
class NewFeatureManager:
    def __init__(self, settings: Settings):
        self.settings = settings

    async def process_request(self, request: NewFeatureRequest) -> ProcessingResult:
        # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
        pass

# 3. Discord ã‚³ãƒãƒ³ãƒ‰è¿½åŠ 
class NewFeatureCommands:
    def __init__(self, feature_manager: NewFeatureManager):
        self.feature_manager = feature_manager

    @app_commands.command()
    async def new_feature_command(self, interaction: discord.Interaction, title: str):
        # ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
        pass

# 4. ãƒ†ã‚¹ãƒˆä½œæˆ
class TestNewFeature:
    @pytest.mark.asyncio
    async def test_process_request(self):
        # ãƒ†ã‚¹ãƒˆå®Ÿè£…
        pass
```

### APIã®æ‹¡å¼µ

#### 1. æ–°ã—ã„AIå‡¦ç†æ©Ÿèƒ½ã®è¿½åŠ 

```python
# src/ai/processor.py ã¸ã®æ©Ÿèƒ½è¿½åŠ ä¾‹

class AIProcessor:
    async def new_analysis_feature(
        self,
        input_data: str,
        analysis_type: str = "standard"
    ) -> AnalysisResult:
        """æ–°ã—ã„åˆ†ææ©Ÿèƒ½ã®å®Ÿè£…"""

        # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯
        cache_key = self._generate_content_hash(f"{input_data}:{analysis_type}")
        cached_result = await self._get_from_cache(cache_key)
        if cached_result:
            return cached_result

        # Gemini APIå‘¼ã³å‡ºã—
        prompt = self._build_analysis_prompt(input_data, analysis_type)

        try:
            response = await self.gemini_client.generate_content_async(prompt)
            result = self._parse_analysis_response(response)

            # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜
            await self._save_to_cache(cache_key, result)

            return result

        except Exception as e:
            logger.error("Analysis failed", error=str(e))
            raise ProcessingError(f"Analysis failed: {e}")
```

#### 2. æ–°ã—ã„Obsidiançµ±åˆæ©Ÿèƒ½

```python
# src/obsidian/file_manager.py ã¸ã®æ©Ÿèƒ½è¿½åŠ ä¾‹

class ObsidianFileManager:
    async def create_specialized_note(
        self,
        note_type: str,
        content: Dict[str, Any],
        template_override: Optional[str] = None
    ) -> SaveResult:
        """ç‰¹æ®Šãªãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒ—ã®ä½œæˆ"""

        # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ
        template = template_override or f"{note_type}_template.md"

        # ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ§‹é€ åŒ–
        structured_content = await self._structure_content(content, note_type)

        # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé©ç”¨
        final_content = await self.template_system.apply_template(
            template, structured_content
        )

        # ä¿å­˜å…ˆæ±ºå®š
        folder = self._determine_folder_for_type(note_type)

        # ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
        return await self.save_note(final_content, metadata, folder)
```

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### 1. å˜ä½“ãƒ†ã‚¹ãƒˆ

```python
# tests/unit/test_new_feature.py

import pytest
from unittest.mock import AsyncMock, MagicMock
from src.new_feature.manager import NewFeatureManager

class TestNewFeatureManager:
    @pytest.fixture
    def manager(self, mock_settings):
        return NewFeatureManager(mock_settings)

    @pytest.mark.asyncio
    async def test_process_request_success(self, manager):
        # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™
        request = NewFeatureRequest(title="Test", description="Test description")

        # ãƒ¢ãƒƒã‚¯è¨­å®š
        manager.external_service = AsyncMock()
        manager.external_service.process.return_value = {"status": "success"}

        # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        result = await manager.process_request(request)

        # ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
        assert result.success is True
        assert result.data["status"] == "success"
        manager.external_service.process.assert_called_once()
```

#### 2. çµ±åˆãƒ†ã‚¹ãƒˆ

```python
# tests/integration/test_new_feature_integration.py

import pytest
from src.bot.client import DiscordBot
from src.new_feature.manager import NewFeatureManager

class TestNewFeatureIntegration:
    @pytest.mark.asyncio
    async def test_discord_to_obsidian_flow(self, test_bot, test_vault):
        # ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ

        # Discord ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        mock_message = create_mock_message("Test new feature")

        # å‡¦ç†å®Ÿè¡Œ
        result = await test_bot.process_message(mock_message)

        # Obsidianä¿å­˜ç¢ºèª
        saved_files = test_vault.list_recent_files()
        assert len(saved_files) == 1
        assert "new-feature" in saved_files[0].name
```

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

```python
# tests/performance/test_ai_performance.py

import pytest
import time
from src.ai.processor import AIProcessor

class TestAIPerformance:
    @pytest.mark.asyncio
    async def test_batch_processing_performance(self, ai_processor):
        # å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

        texts = ["Test text " + str(i) for i in range(100)]

        start_time = time.time()
        results = await ai_processor.process_batch(texts, max_concurrent=5)
        end_time = time.time()

        # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ç¢ºèª
        processing_time = end_time - start_time
        assert processing_time < 30.0  # 30ç§’ä»¥å†…
        assert len(results) == 100
        assert all(r.success for r in results)
```

### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

#### 1. æœ¬ç•ªç’°å¢ƒè¨­å®š

```yaml
# service.yaml (Google Cloud Run)
apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: discord-obsidian-memo-bot
  annotations:
    run.googleapis.com/ingress: all
spec:
  template:
    metadata:
      annotations:
        run.googleapis.com/execution-environment: gen2
        run.googleapis.com/cpu-throttling: "false"
    spec:
      containerConcurrency: 1
      timeoutSeconds: 3600
      containers:
      - image: gcr.io/PROJECT_ID/discord-obsidian-memo-bot
        ports:
        - containerPort: 8080
        env:
        - name: ENVIRONMENT
          value: "production"
        - name: USE_SECRET_MANAGER
          value: "true"
        - name: GOOGLE_CLOUD_PROJECT
          value: "PROJECT_ID"
        resources:
          limits:
            cpu: "2"
            memory: "2Gi"
          requests:
            cpu: "1"
            memory: "1Gi"
```

#### 2. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```yaml
# .github/workflows/deploy.yml
name: Deploy to Cloud Run

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: astral-sh/setup-uv@v1
    - name: Install dependencies
      run: uv sync --dev
    - name: Run tests
      run: uv run pytest --cov=src
    - name: Type check
      run: uv run mypy src/
    - name: Lint
      run: uv run ruff check src/

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: google-github-actions/setup-gcloud@v1
    - name: Deploy to Cloud Run
      run: |
        gcloud run deploy discord-obsidian-memo-bot \
          --source . \
          --platform managed \
          --region asia-northeast1 \
          --allow-unauthenticated
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—é–¢é€£

##### Q: `uv sync` ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¤±æ•—ã™ã‚‹

**åŸå› **: Python 3.13æœªæº€ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:
```bash
# Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
python --version

# Python 3.13ä»¥ä¸Šã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# macOS (Homebrew)
brew install python@3.13

# Ubuntu
sudo apt update
sudo apt install python3.13

# uvã§Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š
uv python install 3.13
uv sync
```

##### Q: Discord Bot TokenãŒç„¡åŠ¹ã¨ã„ã†ã‚¨ãƒ©ãƒ¼

**åŸå› **: ãƒˆãƒ¼ã‚¯ãƒ³ã®è¨­å®šãƒŸã‚¹ã¾ãŸã¯æ¨©é™ä¸è¶³

**è§£æ±ºæ–¹æ³•**:
```bash
# ãƒˆãƒ¼ã‚¯ãƒ³ç¢ºèª
echo $DISCORD_BOT_TOKEN

# Discord Developer Portalã§ç¢ºèª:
# 1. Bot permissions: Send Messages, Read Message History, Use Slash Commands
# 2. OAuth2 URL Generator: bot + applications.commands ã‚¹ã‚³ãƒ¼ãƒ—
# 3. ã‚µãƒ¼ãƒãƒ¼ã«é©åˆ‡ã«æ‹›å¾…ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
```

##### Q: Obsidianãƒœãƒ«ãƒˆãƒ‘ã‚¹ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ

**åŸå› **: ãƒ‘ã‚¹ãŒå­˜åœ¨ã—ãªã„ã‹ã€æ¨©é™ãŒãªã„

**è§£æ±ºæ–¹æ³•**:
```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p /path/to/obsidian/vault

# æ¨©é™ç¢ºèª
ls -la /path/to/obsidian/

# ãƒ‘ã‚¹è¨­å®šç¢ºèª
echo $OBSIDIAN_VAULT_PATH
```

#### 2. å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼

##### Q: Gemini API ã§ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: `429 Too Many Requests`

**è§£æ±ºæ–¹æ³•**:
```python
# ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¨­å®šã®èª¿æ•´ (.env)
GEMINI_API_DAILY_LIMIT=1500
GEMINI_API_MINUTE_LIMIT=15

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æœ‰åŠ¹æ´»ç”¨
# AIProcessorã¯è‡ªå‹•çš„ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ã—ã¦APIå‘¼ã³å‡ºã—ã‚’æœ€å°åŒ–
```

##### Q: éŸ³å£°èªè­˜ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: `Google Cloud Speech API authentication failed`

**è§£æ±ºæ–¹æ³•**:
```bash
# ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼è¨­å®š
export GOOGLE_APPLICATION_CREDENTIALS="/path/to/service-account.json"

# ã¾ãŸã¯ã€éŸ³å£°æ©Ÿèƒ½ã‚’ç„¡åŠ¹åŒ–
export MOCK_SPEECH_ENABLED=true
```

##### Q: Discordã§ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: ã‚³ãƒãƒ³ãƒ‰åŒæœŸã®å•é¡Œ

**è§£æ±ºæ–¹æ³•**:
```python
# é–‹ç™ºä¸­ã¯æ‰‹å‹•ã§ã‚³ãƒãƒ³ãƒ‰åŒæœŸ
# Botã‚³ãƒ¼ãƒ‰ã«ä¸€æ™‚çš„ã«è¿½åŠ :
@bot.event
async def on_ready():
    try:
        synced = await bot.tree.sync()
        print(f"Synced {len(synced)} command(s)")
    except Exception as e:
        print(f"Failed to sync commands: {e}")
```

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ

##### Q: AIå‡¦ç†ãŒé…ã„

**åŸå› **: ãƒãƒƒãƒå‡¦ç†ã®éåŠ¹ç‡ã¾ãŸã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœªä½¿ç”¨

**è§£æ±ºæ–¹æ³•**:
```python
# ãƒãƒƒãƒã‚µã‚¤ã‚ºã®èª¿æ•´
await ai_processor.process_batch(texts, max_concurrent=3)

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥çŠ¶æ…‹ç¢ºèª
cache_info = ai_processor.get_cache_info()
print(f"Cache hit rate: {cache_info['hit_rate']}")

# å¤§é‡å‡¦ç†æ™‚ã®ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ä½¿ç”¨
for text in large_text_list:
    ai_processor.add_to_queue(text)
await ai_processor.process_queue()
```

##### Q: Obsidianãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãŒé…ã„

**åŸå› **: ãƒ‡ã‚£ã‚¹ã‚¯I/Oãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«æ•°éå¤š

**è§£æ±ºæ–¹æ³•**:
```python
# å®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
await obsidian_manager.clear_operation_history()

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®æœ€é©åŒ–
await obsidian_manager.backup_vault()  # æœˆ1å›ç¨‹åº¦

# ãƒ•ã‚¡ã‚¤ãƒ«çµ±è¨ˆç¢ºèª
stats = await obsidian_manager.get_vault_stats()
print(f"Total files: {stats.total_files}")
```

#### 4. ãƒ¡ãƒ¢ãƒªãƒ»ãƒªã‚½ãƒ¼ã‚¹å•é¡Œ

##### Q: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒå¤šã„

**åŸå› **: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®è‚¥å¤§åŒ–ã¾ãŸã¯ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯

**è§£æ±ºæ–¹æ³•**:
```python
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºç¢ºèªã¨ã‚¯ãƒªã‚¢
cache_info = ai_processor.get_cache_info()
if cache_info['size_mb'] > 100:  # 100MBè¶…é
    ai_processor.clear_cache()

# ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç›£è¦–
/system_metrics  # Discordã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèª
```

##### Q: Cloud Runã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒç™ºç”Ÿ

**åŸå› **: é•·æ™‚é–“å‡¦ç†ã«ã‚ˆã‚‹ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

**è§£æ±ºæ–¹æ³•**:
```yaml
# service.yaml ã®èª¿æ•´
spec:
  template:
    metadata:
      annotations:
        run.googleapis.com/execution-environment: gen2
        run.googleapis.com/cpu-throttling: "false"
    spec:
      timeoutSeconds: 3600  # 1æ™‚é–“ã«å»¶é•·
      containers:
      - resources:
          limits:
            cpu: "2"      # CPUå¢—å¼·
            memory: "2Gi" # ãƒ¡ãƒ¢ãƒªå¢—å¼·
```

#### 5. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§å•é¡Œ

##### Q: Obsidianãƒãƒ¼ãƒˆãŒé‡è¤‡ä¿å­˜ã•ã‚Œã‚‹

**åŸå› **: é‡è¤‡æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã®å•é¡Œ

**è§£æ±ºæ–¹æ³•**:
```python
# é‡è¤‡ãƒã‚§ãƒƒã‚¯ã®å¼·åŒ–
# ObsidianFileManager ã®è¨­å®šç¢ºèª

# æ‰‹å‹•ã§ã®é‡è¤‡å‰Šé™¤
duplicates = await obsidian_manager.find_duplicates()
for dup in duplicates:
    await obsidian_manager.delete_note(dup.path)
```

##### Q: ã‚¿ã‚¹ã‚¯ã‚„ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆå¤±

**åŸå› **: ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿ã‚¨ãƒ©ãƒ¼ã¾ãŸã¯æ¨©é™å•é¡Œ

**è§£æ±ºæ–¹æ³•**:
```python
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®å¾©å…ƒ
backup_files = await obsidian_manager.list_backups()
latest_backup = backup_files[0]
await obsidian_manager.restore_from_backup(latest_backup)

# è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®æœ‰åŠ¹åŒ–
# ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š
```

### ãƒ­ã‚°ã¨ãƒ‡ãƒãƒƒã‚°

#### 1. ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã®èª¿æ•´

```bash
# è©³ç´°ãƒ­ã‚°å‡ºåŠ›
export LOG_LEVEL=DEBUG

# JSONå½¢å¼ãƒ­ã‚°
export LOG_FORMAT=json

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®š
export LOG_FILE=/app/logs/bot.log
```

#### 2. ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®å–å¾—

```discord
# ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèª
/status

# è©³ç´°ãƒ¡ãƒˆãƒªã‚¯ã‚¹
/system_metrics

# AIå‡¦ç†çŠ¶æ³
/cache_info

# Obsidianãƒœãƒ«ãƒˆçŠ¶æ³
/vault_stats
```

#### 3. ã‚¨ãƒ©ãƒ¼è¿½è·¡

```python
# ã‚«ã‚¹ã‚¿ãƒ ãƒ­ã‚¬ãƒ¼ä½¿ç”¨ä¾‹
from src.utils.logger import get_logger

logger = get_logger("debug_session")

try:
    result = await some_operation()
    logger.info("Operation completed", result=result)
except Exception as e:
    logger.error(
        "Operation failed",
        error=str(e),
        operation="some_operation",
        exc_info=True
    )
```

### ã‚µãƒãƒ¼ãƒˆã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£

#### å•é¡Œå ±å‘Š

1. **GitHubã‚¤ã‚·ãƒ¥ãƒ¼**: ãƒã‚°å ±å‘Šãƒ»æ©Ÿèƒ½è¦æ±‚
2. **ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«**: ã‚¨ãƒ©ãƒ¼è©³ç´°ã®æä¾›
3. **è¨­å®šæƒ…å ±**: ç’°å¢ƒå¤‰æ•°ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (æ©Ÿå¯†æƒ…å ±é™¤ã)
4. **å†ç¾æ‰‹é †**: å•é¡Œã®å†ç¾å¯èƒ½ãªæ‰‹é †

#### è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

1. **ãƒ•ã‚©ãƒ¼ã‚¯**: ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ•ã‚©ãƒ¼ã‚¯
2. **ãƒ–ãƒ©ãƒ³ãƒ**: `feature/your-feature-name` ã§é–‹ç™º
3. **ãƒ†ã‚¹ãƒˆ**: æ–°æ©Ÿèƒ½ã«ã¯å¿…ãšãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
4. **ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: è©³ç´°ãªèª¬æ˜ã¨å¤‰æ›´ç†ç”±

---

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±**
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 0.1.0
- **Pythonè¦æ±‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.13ä»¥ä¸Š
- **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**: MIT
- **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼**: Kent
- **æœ€çµ‚æ›´æ–°**: 2025å¹´8æœˆ17æ—¥

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ç¶™ç¶šçš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚æœ€æ–°æƒ…å ±ã¯[GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/kenvexar/discord-obsidian-memo-bot)ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
